<script type="text/javascript">
  RED.nodes.registerType('alice-sh-toggle', {
    category: 'alice',
    paletteLabel: 'toggle',
    icon: 'alice.svg',
    align: 'left',
    color: '#f2f3f5',
    defaults: {
      device: {value: '', type: 'alice-sh-device'},
      name: {value: ''},
      instance: {value: 'backlight'},
      response: {value: true}
    },
    inputs: 1,
    outputs: 1,
    label: function () {
      return this.name + ':' + this.instance;
    },
    oneditprepare: function () {
      if (this.response === undefined) {
        $('#node-input-response').prop('checked', true);
      }
    },
    oneditsave: function () {
      deivcename = $('#node-input-device option:selected').text();
      $('#node-input-name').val(deivcename);
    }
  });
</script>

<script type="text/html" data-template-name="alice-sh-toggle">
  <input type="hidden" id="node-input-name" />
  <div class="form-row">
    <label for="node-input-device">Device</label>
    <input id="node-input-device" />
  </div>
  <div class="form-row">
    <label for="node-input-instance">Instance</label>
    <select id="node-input-instance" style="width: 70%;">
      <option value="backlight">Backlight</option>
      <option value="controls_locked">Locking</option>
      <option value="ionization">Ionization</option>
      <option value="keep_warm">Keep warm</option>
      <option value="mute">Mute</option>
      <option value="oscillation">Oscillation</option>
      <option value="pause">Pause</option>
    </select>
  </div>
  <div class="form-row">
    <label for="node-input-response"><i class="fa fa-refresh"></i> <span>Response</span></label>
    <label for="node-input-response" style="width:70%">
      <input
        type="checkbox"
        id="node-input-response"
        style="display:inline-block; width:22px; vertical-align:baseline;"
        autocomplete="off"
      /><span>Always answer Alice with success</span>
    </label>
  </div>
</script>

<script type="text/html" data-help-name="alice-sh-toggle">
  <p>Manage device settings that can only be in one of two states.</p>
  <p>
    The toggle skill has features. Functions are characterized by certain parameters and voice scripts that allow you to
    describe the corresponding skills of the device.
  </p>

  <h3>Property</h3>
  <dl class="message-properties">
    <dt>
      Device
      <span class="property-type">Select</span>
    </dt>
    <dd>The device to which this feature is connected</dd>
    <dt>
      Instance
      <span class="property-type">Select</span>
    </dt>
    <dd>The name of the function for this skill. Affects which voice command is called</dd>
    <dt>
      Response
      <span class="property-type">checkbox</span>
    </dt>
    <dd>
      In order for the device to respond to Alice that the command was successful, the corresponding value should arrive
      at the input within 2.5 seconds. If your device takes longer or doesnâ€™t return a confirmation at all, just check
      this box.
    </dd>
  </dl>

  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>
      payload
      <span class="property-type">boolean</span>
    </dt>
    <dd>true or false</dd>
  </dl>

  <h3>Outputs</h3>
  <dl class="message-properties">
    <dt>
      payload
      <span class="property-type">boolean</span>
    </dt>
    <dd>true or false</dd>
  </dl>
  <h3>References</h3>
  <ul>
    <li>
      <a target="_blank" href="https://yandex.ru/dev/dialogs/alice/doc/smart-home/concepts/toggle-instance-docpage/"
        >Yandex documentation</a
      >
    </li>
  </ul>
</script>
